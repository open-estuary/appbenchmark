#install etcd
- name: transfer setup_etcd.sh
  template: src=setup_etcd.sh dest=/tmp/setup_etcd.sh mode=0755

- name: setup etcd
  shell: ./setup_etcd.sh
  args:
    chdir: /tmp/

- name: transfer etcd.service
  template: src=etcd.service dest=/lib/systemd/system/etcd.service mode=0644

- name: make etcd config dir
  file: path=/etc/etcd mode=0644 state=directory
- name: make etcd work dir
  file: path=/var/lib/etcd mode=0644 state=directory

- name: transfer etcd config
  template: src=etcd.conf dest=/etc/etcd/etcd.conf mode=0644

- name: start etcd
  service: name=etcd enabled=yes

